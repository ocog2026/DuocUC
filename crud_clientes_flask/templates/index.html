{% extends "base.html" %}

<!-- ========================================================================= -->
<!-- PÃGINA: LISTAR CLIENTES - templates/index.html -->
<!-- Mostrar todos los clientes en una tabla con opciones de editar/eliminar -->
<!-- ========================================================================= -->

{% block title %}Lista de Clientes - CRUD{% endblock %}

{% block content %}
<div class="btn-group">
    <!-- BotÃ³n para agregar un nuevo cliente -->
    <a href="{{ url_for('agregar_cliente_form') }}" class="btn btn-primary">
        âž• Agregar Nuevo Cliente
    </a>
</div>

<!-- SecciÃ³n principal: Tabla de clientes o mensaje vacÃ­o -->
{% if clientes %}
    <!-- Si hay clientes, mostrar tabla -->
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>TelÃ©fono</th>
                <th>DirecciÃ³n</th>
                <th>Fecha de CreaciÃ³n</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <!-- Bucle para mostrar cada cliente -->
            {% for cliente in clientes %}
            <tr>
                <!-- EXPLICACIÃ“N: Se accede a los atributos del diccionario cliente -->
                <!-- cliente['id'], cliente['nombre'], etc. -->
                
                <td>{{ cliente['id'] }}</td>
                <td>{{ cliente['nombre'] }}</td>
                <td>{{ cliente['email'] }}</td>
                <td>{{ cliente['telefono'] }}</td>
                <td>{{ cliente['direccion'] }}</td>
                <td>{{ cliente['fecha_creacion'] }}</td>
                <td>
                    <!-- Botones de editar y eliminar -->
                    <div class="actions">
                        <!-- BotÃ³n EDITAR: lleva a /clientes/editar/<id> -->
                        <a href="{{ url_for('mostrar_formulario_editar', cliente_id=cliente['id']) }}" 
                           class="btn btn-warning btn-sm">
                            âœŽ Editar
                        </a>
                        
                        <!-- BotÃ³n ELIMINAR: abre un formulario oculto para enviar POST -->
                        <form method="POST" action="{{ url_for('eliminar_cliente', cliente_id=cliente['id']) }}" 
                              style="display: inline;" 
                              onsubmit="return confirm('Â¿EstÃ¡s seguro de que deseas eliminar este cliente?')">
                            <button type="submit" class="btn btn-danger btn-sm">
                                ðŸ—‘ Eliminar
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <!-- InformaciÃ³n de cantidad de clientes -->
    <p style="margin-top: 15px; color: #666; text-align: right;">
        Total: <strong>{{ clientes|length }}</strong> cliente(s)
    </p>

{% else %}
    <!-- Si no hay clientes, mostrar mensaje vacÃ­o -->
    <div class="empty-state">
        <h2>ðŸ“‹ No hay clientes registrados</h2>
        <p>Comienza a agregar clientes haciendo clic en el botÃ³n "Agregar Nuevo Cliente"</p>
        <br>
        <a href="{{ url_for('agregar_cliente_form') }}" class="btn btn-primary">
            âž• Agregar Primer Cliente
        </a>
    </div>
{% endif %}
{% endblock %}
